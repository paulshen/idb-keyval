var idbKeyval=function(t){"use strict";function e(t){return new Promise(((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)}))}function n(t,n){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(n);const u=e(r);return(t,e)=>u.then((r=>e(r.transaction(n,t).objectStore(n))))}let r;function u(){return r||(r=n("keyval-store","keyval")),r}function o(t,n){return t("readwrite",(t=>(t.openCursor().onsuccess=function(){this.result&&(n(this.result),this.result.continue())},e(t.transaction))))}return t.clear=function(t=u()){return t("readwrite",(t=>(t.clear(),e(t.transaction))))},t.createStore=n,t.del=function(t,n=u()){return n("readwrite",(n=>(n.delete(t),e(n.transaction))))},t.entries=function(t=u()){const e=[];return o(t,(t=>e.push([t.key,t.value]))).then((()=>e))},t.get=function(t,n=u()){return n("readwrite",(n=>e(n.get(t))))},t.getMany=function(t,n=u()){return n("readwrite",(n=>Promise.all(t.map((t=>e(n.get(t)))))))},t.keys=function(t=u()){const e=[];return o(t,(t=>e.push(t.key))).then((()=>e))},t.promisifyRequest=e,t.set=function(t,n,r=u()){return r("readwrite",(r=>(r.put(n,t),e(r.transaction))))},t.setMany=function(t,n=u()){return n("readwrite",(n=>(t.forEach((t=>n.put(t[1],t[0]))),e(n.transaction))))},t.update=function(t,n,r=u()){return r("readwrite",(r=>new Promise(((u,o)=>{r.get(t).onsuccess=function(){try{r.put(n(this.result),t),u(e(r.transaction))}catch(t){o(t)}}}))))},t.values=function(t=u()){const e=[];return o(t,(t=>e.push(t.value))).then((()=>e))},t}({});
